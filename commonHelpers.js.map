{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function fetchImg(searchWord, page, per_page = 15) {\n  const apiKey = '42869495-3eaffa1d7f59c13a6a9af4ac7';\n\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchWord}&orientation=horizontal&safesearch=true&page=${page}&per_page=${per_page}`;\n\n  try {\n    if (!searchWord) {\n      throw new Error('Search word is empty');\n    }\n\n    const response = await axios.get(url);\n\n    return response.data;\n  } catch (error) {\n    throw new Error(`Failed to fetch images: ${error.message}`);\n  }\n}\n\nexport default fetchImg;\n","\n\nfunction createGalleryMarkup(items) {\n  const gallery = document.querySelector('.gallery');\n  const markup = items\n    .map(item => {\n      return `<li class=\"gallery-list-item\">\n        <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n            <img class=\"gallery-list-item-img\" src=\"${item.webformatURL}\" alt=\"${item.tags}\"/>        \n        </a>\n            <div class=\"text-wrapper\">\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Likes</p>\n                    <p class =\"gallery-list-item-text\">${item.likes}</p>\n                </div>\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Views</p>\n                    <p class =\"gallery-list-item-text\">${item.views}</p>\n                </div>\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Comments</p>\n                    <p class =\"gallery-list-item-text\">${item.comments}</p>\n                </div>\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Downloads </p>\n                    <p class =\"gallery-list-item-text\">${item.downloads}</p>\n                </div>\n            </div>\n            \n      </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport default createGalleryMarkup;","const form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loaderSecond = document.querySelector('.loader-2');\nconst searchInput = document.querySelector('.search-input');\nlet searchWord = '';\nconst galWrap = document.querySelector('.gallery');\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst moreBtn = document.querySelector('.more-btn');\n\nconst showLoader = () => {\n  loader.classList.add('is-open');\n};\nconst hideLoader = () => {\n  loader.classList.remove('is-open');\n};\nconst showSecondLoader = () => {\n  loaderSecond.classList.remove('hidden')\n}\nconst hideSecondLoader = () => {\n  loaderSecond.classList.add(\"hidden\")\n}\n\nlet page = 1;\nconst per_page = 15;\nconst totalPages = Math.ceil(500 / per_page);\n\nimport fetchImg from './js/pixabay-api';\nimport createGalleryMarkup from './js/render-functions';\nconst lightbox = new simpleLightbox('.gallery a', {});\n\nform.addEventListener('submit', async evt => {\n  galWrap.innerHTML = '';\n  evt.preventDefault();\n  showLoader();\n  try {\n    searchWord = searchInput.value;\n    if (!searchWord) {\n      return iziToast.error({\n        position: 'topRight',\n        message: 'Search word is empty',\n      });\n    }\n    const imagesData = await fetchImg(searchWord);\n    const { hits } = imagesData;\n    page += 1;\n    if (hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n    }\n\n    createGalleryMarkup(hits);\n    if (page >= 2) {\n      moreBtn.classList.remove('hidden');\n    }\n    lightbox.refresh();\n    hideLoader();\n    form.reset();\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nmoreBtn.addEventListener('click', async evt => {\n  evt.preventDefault();\n  showSecondLoader()\n  if (page > totalPages) {\n    moreBtn.classList.add('hidden');\n    return iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n  try {\n    const imagesData = await fetchImg(searchWord, page, per_page);\n    hideSecondLoader();\n    page += 1;\n    const { hits } = imagesData;\n    createGalleryMarkup(hits);\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n\n  form.reset();\n});\n"],"names":["fetchImg","searchWord","page","per_page","url","axios","error","createGalleryMarkup","items","gallery","markup","item","form","loader","loaderSecond","searchInput","galWrap","moreBtn","showLoader","hideLoader","showSecondLoader","hideSecondLoader","totalPages","lightbox","simpleLightbox","evt","iziToast","imagesData","hits"],"mappings":"owBAEA,eAAeA,EAASC,EAAYC,EAAMC,EAAW,GAAI,CAGvD,MAAMC,EAAM,qEAA4CH,CAAU,gDAAgDC,CAAI,aAAaC,CAAQ,GAE3I,GAAI,CACF,GAAI,CAACF,EACH,MAAM,IAAI,MAAM,sBAAsB,EAKxC,OAFiB,MAAMI,EAAM,IAAID,CAAG,GAEpB,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAM,2BAA2BA,EAAM,OAAO,EAAE,CAC3D,CACH,CChBA,SAASC,EAAoBC,EAAO,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IAAIG,GACI;AAAA,wCAC2BA,EAAK,aAAa;AAAA,sDACJA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,yDAKjCA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,yDAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,yDAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,yDAIbA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,YAKlE,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CCjCA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,WAAW,EACjDC,EAAc,SAAS,cAAc,eAAe,EAC1D,IAAId,EAAa,GACjB,MAAMe,EAAU,SAAS,cAAc,UAAU,EAK3CC,EAAU,SAAS,cAAc,WAAW,EAE5CC,EAAa,IAAM,CACvBL,EAAO,UAAU,IAAI,SAAS,CAChC,EACMM,EAAa,IAAM,CACvBN,EAAO,UAAU,OAAO,SAAS,CACnC,EACMO,EAAmB,IAAM,CAC7BN,EAAa,UAAU,OAAO,QAAQ,CACxC,EACMO,EAAmB,IAAM,CAC7BP,EAAa,UAAU,IAAI,QAAQ,CACrC,EAEA,IAAIZ,EAAO,EACX,MAAMC,EAAW,GACXmB,EAAa,KAAK,KAAK,IAAMnB,CAAQ,EAIrCoB,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAEpDZ,EAAK,iBAAiB,SAAU,MAAMa,GAAO,CAC3CT,EAAQ,UAAY,GACpBS,EAAI,eAAc,EAClBP,IACA,GAAI,CAEF,GADAjB,EAAac,EAAY,MACrB,CAACd,EACH,OAAOyB,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,sBACjB,CAAO,EAEH,MAAMC,EAAa,MAAM3B,EAASC,CAAU,EACtC,CAAE,KAAA2B,CAAM,EAAGD,EACjBzB,GAAQ,EACJ0B,EAAK,SAAW,GAClBF,EAAS,KAAK,CACZ,QACE,2EACF,MAAO,MACP,SAAU,UAClB,CAAO,EAGHnB,EAAoBqB,CAAI,EACpB1B,GAAQ,GACVe,EAAQ,UAAU,OAAO,QAAQ,EAEnCM,EAAS,QAAO,EAChBJ,IACAP,EAAK,MAAK,CACX,OAAQN,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAEDW,EAAQ,iBAAiB,QAAS,MAAMQ,GAAO,CAG7C,GAFAA,EAAI,eAAc,EAClBL,EAAkB,EACdlB,EAAOoB,EACT,OAAAL,EAAQ,UAAU,IAAI,QAAQ,EACvBS,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,4DACf,CAAK,EAEH,GAAI,CACF,MAAMC,EAAa,MAAM3B,EAASC,EAAYC,EAAMC,CAAQ,EAC5DkB,IACAnB,GAAQ,EACR,KAAM,CAAE,KAAA0B,CAAM,EAAGD,EACjBpB,EAAoBqB,CAAI,EACxBL,EAAS,QAAO,CACjB,OAAQjB,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEDM,EAAK,MAAK,CACZ,CAAC"}