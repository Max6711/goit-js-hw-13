{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function fetchImg(searchWord, page, per_page) {\n  const apiKey = '42869495-3eaffa1d7f59c13a6a9af4ac7';\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchWord}&orientation=horizontal&image_type=photo&safesearch=true&page=${page}&per_page=${per_page}`;\n  const response = await axios.get(url);\n  return response.data;\n}\n\nexport default fetchImg;\n","\n\nfunction createGalleryMarkup(items) {\n  const gallery = document.querySelector('.gallery');\n  const markup = items\n    .map(item => {\n      return `<li class=\"gallery-list-item\">\n        <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n            <img class=\"gallery-list-item-img\" src=\"${item.webformatURL}\" alt=\"${item.tags}\"/>        \n        </a>\n            <div class=\"text-wrapper\">\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Likes</p>\n                    <p class =\"gallery-list-item-text\">${item.likes}</p>\n                </div>\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Views</p>\n                    <p class =\"gallery-list-item-text\">${item.views}</p>\n                </div>\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Comments</p>\n                    <p class =\"gallery-list-item-text\">${item.comments}</p>\n                </div>\n                <div class=\"item-text-wrapper\">\n                    <p class =\"gallery-list-item-text-1\">Downloads </p>\n                    <p class =\"gallery-list-item-text\">${item.downloads}</p>\n                </div>\n            </div>\n            \n      </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport default createGalleryMarkup;","// Імпорти бібліотек\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport IziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// Імпорти функцій\nimport fetchImg from './js/pixabay-api';\nimport createGalleryMarkup from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loaderSecond = document.querySelector('.loader-2');\nconst searchInput = document.querySelector('.search-input');\nlet searchWord = '';\nconst galWrap = document.querySelector('.gallery');\nconst moreBtn = document.querySelector('.more-btn');\nlet page = 1;\nlet totalPages;\nconst per_page = 15;\nconst lightbox = new SimpleLightbox('.gallery a', {});\n\nconst showLoader = () => {\n  loader.classList.add('is-open');\n};\nconst hideLoader = () => {\n  loader.classList.remove('is-open');\n};\nconst showSecondLoader = () => {\n  loaderSecond.classList.add('is-open');\n};\nconst hideSecondLoader = () => {\n  loaderSecond.classList.remove('is-open');\n};\nconst showMoreBtn = () => {\n  moreBtn.classList.remove('hidden');\n};\nconst hideMoreBtn = () => {\n  moreBtn.classList.add('hidden');\n};\n\n// оборбка події сабміт\n\nform.addEventListener('submit', async evt => {\n  page = 1;\n  hideMoreBtn();\n  galWrap.innerHTML = '';\n  evt.preventDefault();\n\n  try {\n    searchWord = searchInput.value.trim();\n    if (!searchWord) {\n      form.reset();\n      return IziToast.error({\n        position: 'topRight',\n        message: 'Search word is empty',\n      });\n    }\n    showLoader();\n    const imagesData = await fetchImg(searchWord, page, per_page);\n    const { hits, totalHits } = imagesData;\n    totalPages = Math.ceil(totalHits / per_page);\n\n    if (hits.length === 0) {\n      hideLoader();\n      form.reset();\n      return IziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n    }\n\n    page += 1;\n\n    createGalleryMarkup(hits);\n\n    lightbox.refresh();\n    hideLoader();\n    showMoreBtn();\n    form.reset();\n\n    if (page > totalPages) {\n      hideMoreBtn();\n      form.reset();\n      return IziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n\n// Обробка події клік кнопки Load more\n\nmoreBtn.addEventListener('click', async evt => {\n  evt.preventDefault();\n  showSecondLoader();\n  if (page > totalPages) {\n    hideMoreBtn();\n    return IziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n  try {\n    const imagesData = await fetchImg(searchWord, page, per_page);\n\n    page += 1;\n    const { hits, totalHits } = imagesData;\n    totalPages = Math.ceil(totalHits / per_page);\n    createGalleryMarkup(hits);\n    hideSecondLoader();\n    lightbox.refresh();\n    if (page > totalPages) {\n      hideMoreBtn();\n      form.reset();\n      return IziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  smoothScroll();\n  form.reset();\n});\n\n// Функція плавного скроллу\n\nfunction smoothScroll() {\n  const card = document.querySelector('.gallery-list-item');\n  const cardHeight = card.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["fetchImg","searchWord","page","per_page","url","axios","createGalleryMarkup","items","gallery","markup","item","form","loader","loaderSecond","searchInput","galWrap","moreBtn","totalPages","lightbox","SimpleLightbox","showLoader","hideLoader","showSecondLoader","hideSecondLoader","showMoreBtn","hideMoreBtn","evt","IziToast","imagesData","hits","totalHits","error","smoothScroll","cardHeight"],"mappings":"+vBAEA,eAAeA,EAASC,EAAYC,EAAMC,EAAU,CAElD,MAAMC,EAAM,qEAA4CH,CAAU,iEAAiEC,CAAI,aAAaC,CAAQ,GAE5J,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IAClB,CCLA,SAASE,EAAoBC,EAAO,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IAAIG,GACI;AAAA,wCAC2BA,EAAK,aAAa;AAAA,sDACJA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,yDAKjCA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,yDAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,yDAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,yDAIbA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,YAKlE,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CCxBA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,WAAW,EACjDC,EAAc,SAAS,cAAc,eAAe,EAC1D,IAAIb,EAAa,GACjB,MAAMc,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAClD,IAAId,EAAO,EACPe,EACJ,MAAMd,EAAW,GACXe,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAE9CC,EAAa,IAAM,CACvBR,EAAO,UAAU,IAAI,SAAS,CAChC,EACMS,EAAa,IAAM,CACvBT,EAAO,UAAU,OAAO,SAAS,CACnC,EACMU,EAAmB,IAAM,CAC7BT,EAAa,UAAU,IAAI,SAAS,CACtC,EACMU,EAAmB,IAAM,CAC7BV,EAAa,UAAU,OAAO,SAAS,CACzC,EACMW,EAAc,IAAM,CACxBR,EAAQ,UAAU,OAAO,QAAQ,CACnC,EACMS,EAAc,IAAM,CACxBT,EAAQ,UAAU,IAAI,QAAQ,CAChC,EAIAL,EAAK,iBAAiB,SAAU,MAAMe,GAAO,CAC3CxB,EAAO,EACPuB,IACAV,EAAQ,UAAY,GACpBW,EAAI,eAAc,EAElB,GAAI,CAEF,GADAzB,EAAaa,EAAY,MAAM,OAC3B,CAACb,EACH,OAAAU,EAAK,MAAK,EACHgB,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,sBACjB,CAAO,EAEHP,IACA,MAAMQ,EAAa,MAAM5B,EAASC,EAAYC,EAAMC,CAAQ,EACtD,CAAE,KAAA0B,EAAM,UAAAC,CAAW,EAAGF,EAG5B,GAFAX,EAAa,KAAK,KAAKa,EAAY3B,CAAQ,EAEvC0B,EAAK,SAAW,EAClB,OAAAR,IACAV,EAAK,MAAK,EACHgB,EAAS,KAAK,CACnB,QACE,2EACF,MAAO,MACP,SAAU,UAClB,CAAO,EAYH,GATAzB,GAAQ,EAERI,EAAoBuB,CAAI,EAExBX,EAAS,QAAO,EAChBG,IACAG,IACAb,EAAK,MAAK,EAENT,EAAOe,EACT,OAAAQ,IACAd,EAAK,MAAK,EACHgB,EAAS,KAAK,CACnB,SAAU,WACV,QAAS,4DACjB,CAAO,CAEJ,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAIDf,EAAQ,iBAAiB,QAAS,MAAMU,GAAO,CAG7C,GAFAA,EAAI,eAAc,EAClBJ,IACIpB,EAAOe,EACT,OAAAQ,IACOE,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,4DACf,CAAK,EAEH,GAAI,CACF,MAAMC,EAAa,MAAM5B,EAASC,EAAYC,EAAMC,CAAQ,EAE5DD,GAAQ,EACR,KAAM,CAAE,KAAA2B,EAAM,UAAAC,CAAW,EAAGF,EAK5B,GAJAX,EAAa,KAAK,KAAKa,EAAY3B,CAAQ,EAC3CG,EAAoBuB,CAAI,EACxBN,IACAL,EAAS,QAAO,EACZhB,EAAOe,EACT,OAAAQ,IACAd,EAAK,MAAK,EACHgB,EAAS,KAAK,CACnB,SAAU,WACV,QAAS,4DACjB,CAAO,CAEJ,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEDC,IACArB,EAAK,MAAK,CACZ,CAAC,EAID,SAASqB,GAAe,CAEtB,MAAMC,EADO,SAAS,cAAc,oBAAoB,EAChC,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}